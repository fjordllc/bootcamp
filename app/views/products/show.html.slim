- title "æå‡ºç‰©: #{@product.practice.title}"
- set_meta_tags description: "#{@product.user.long_name}ã•ã‚“ãŒæå‡ºã—ãŸã€ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€Œ#{@product.practice.title}ã€ã®æå‡ºç‰©ã§ã™ã€‚"
- category = @product.category(current_user.course)

= render '/shared/modal_learning_completion',
  practice: @product.practice,
  tweet_url: @tweet_url,
  should_display_message_automatically: @learning&.should_display_message_automatically?(current_user:)

header.page-header
  .container
    .page-header__inner
      .page-header__start
        h2.page-header__title
          = @product.practice.title
      .page-header__end
        .page-header-actions
          ul.page-header-actions__items
            li.page-header-actions__item
              = link_to course_practices_path(current_user.course, anchor: "category-#{category.id}"),
                class: 'a-button is-md is-secondary is-block is-back' do
                | ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ä¸€è¦§
            - if current_user.admin?
              li.page-header-actions__item.is-only-mentor
                = link_to products_unchecked_index_path, class: 'a-button is-md is-secondary is-block is-back' do
                  | æœªå®Œäº†ä¸€è¦§

= render 'page_tabs', resource: @product.practice

.page-body

  - if @product.user == current_user && !@product.wip? && !@product.checked? && @product.commented_users.mentor.empty?
    = render 'message_for_after_submission'

  - if @product.wip? && @product.user == current_user
    = render 'message_for_wip'

  - if @product.user == current_user && @learning&.complete?
    = render 'completion_message', practice: @product.practice

  .container.is-xxl
    .row.is-gutter-width-32.justify-center
      .col-xl-7.col-lg-9.col-md-11.col-xs-12
        .page-content.is-product
          .page-body__rows
            .page-body__row
              = render 'product_header', product: @product
            .page-body__row
              = render PracticeContentToggle::PracticeContentToggleComponent.new(content_type: :practice, practice: @product.practice)
            .page-body__row
              = render PracticeContentToggle::PracticeContentToggleComponent.new(content_type: :goal, practice: @product.practice)
            .page-body__row
              = render 'product_body', product: @product

        #js-comments(data-commentable-id="#{@product.id}" data-commentable-type='Product' data-current-user-id="#{current_user.id}")
        div(data-vue='Footprints' data-vue-footprintable-id="#{@product.id}" data-vue-footprintable-type='Product')

      .is-only-mentor(class="#{current_user.mentor? || current_user.admin? ? 'col-xl-5 col-xs-12 is-hidden-sm-down' : ''}")
        - if current_user.mentor? || current_user.admin?
          .side-tabs
            input.a-toggle-checkbox#side-tabs-1 type='radio' name='side-tabs-contents' checked='checked'
            input.a-toggle-checkbox#side-tabs-2 type='radio' name='side-tabs-contents'
            input.a-toggle-checkbox#side-tabs-3 type='radio' name='side-tabs-contents'
            input.a-toggle-checkbox#side-tabs-4 type='radio' name='side-tabs-contents'
            .side-tabs-nav
              .side-tabs-nav__items
                .side-tabs-nav__item
                  label.side-tabs-nav__item-link#side-tabs-nav-1 for='side-tabs-1'
                    | ç›´è¿‘ã®æ—¥å ±
                .side-tabs-nav__item
                  label.side-tabs-nav__item-link#side-tabs-nav-2 for='side-tabs-2'
                    | ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãƒ¡ãƒ¢
                .side-tabs-nav__item
                  label.side-tabs-nav__item-link#side-tabs-nav-3 for='side-tabs-3'
                    | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒ¢
                .side-tabs-nav__item
                  label.side-tabs-nav__item-link#side-tabs-nav-4 for='side-tabs-4'
                    | æå‡ºç‰©
            .side-tabs-contents
              .side-tabs-contents__item#side-tabs-content-1
                = render(partial: 'reports/recent_reports', locals: { header_display: true })
                / #TODO - ã«ã—ãŸã¤ï¼›â†“ã¯å¾Œã§æ¶ˆã™
                p
                  | ğŸš¨â†‘ã¯ä»Šå›ä½œã£ãŸhtmlãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«ã€â†“ã¯å…ƒã®Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
                div(data-vue="UserRecentReports" data-vue-user-id:number="#{@product.user.id}")
              .side-tabs-contents__item#side-tabs-content-2
                = render 'practice_memo', practice_id: @product.practice_id
              .side-tabs-contents__item#side-tabs-content-3
                .user-info
                  = render 'users/user_secret_attributes', user: @product.user
                  = render 'users/metas', user: @product.user
                = render 'users/user_mentor_memo', user_id: @product.user.id
              .side-tabs-contents__item#side-tabs-content-4
                div(data-vue="UserProducts" data-vue-user-id:number="#{@product.user.id}" data-vue-is-mentor:boolean="#{false}" data-vue-current-user-id:number="#{current_user.id}" data-vue-display-user-icon:boolean="false")

- if !current_user.adviser? && @product.practice.open_product?
  .sticky-message
    .container
      p
        | ã“ã®ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¯ã€OKã‚’ã‚‚ã‚‰ã£ã¦ã„ãªãã¦ã‚‚ä»–ã®äººã®æå‡ºç‰©ã‚’é–²è¦§ã§ãã¾ã™ã€‚
