- title "#{@course.title}コース"

header.page-header
  .container
    .page-header__inner
      .page-header__start
        h2.page-header__title = title
        .page-header__optionable-action
          = link_to course_practices_path(course_id: @course), class: 'a-button is-md is-primary is-block' do
            | 変更完了
      .page-header-actions
        ul.page-header-actions__items
          - if current_user.admin_or_mentor?
            li.page-header-actions__item.is-only-mentor
              = link_to new_practice_path(course_id: @course), class: 'a-button is-md is-secondary is-block' do
                i.fa-regular.fa-plus
                | プラクティス作成
          li.page-header-actions__item
            = link_to courses_path, class: 'a-button is-md is-secondary is-block is-back' do
              | コース一覧

.page-body.js-users-visibility
  .container.is-xl
    .page-body__inner
      .page-body__columns
        .page-body__column.is-main
          - @categories.each do |category|
            - if category.practices.present?
              .categories-item.practices
                header.categories-item__header(id="category-#{category.id}")
                  h2.categories-item__title
                    = category.name
                .categories-item__description
                  .js-markdown-view.a-long-text.is-md
                    = category.description
                .categories-item__body.a-card
                  .category-practices.js-category-practices
                    .js-admin-category-practice
                      - category.categories_practices.each do |categories_practice|
                        .category-practices-item.js-practice(
                          data-categories_practice_id="#{categories_practice.id}"
                          data-practice_id="#{categories_practice.practice.id}"
                        )
                          a.category-practices-item__anchor
                          header.category-practices-item__header
                            .category-practices-item__title
                              .category-practices-item__title-link
                                | #{categories_practice.practice.position}　
                                = categories_practice.practice.title
                            .category-practices-item__grab
                              span.a-grab.js-grab
                                i.fa-solid.fa-align-justify

        nav.page-nav.a-card
          ul.page-nav__items
            - @categories.each do |category|
              - if category.practices.present?
                li.page-nav__item
                  a.page-nav__item-link(href="#category-#{category.id}")
                    span.page-nav__item-link-inner
                      = category.name
