= render 'errors', object: report
= form_for report do |f|
  .form__items
    .form__items-inner
      .form-item
        = f.label :practice, class: 'a-form-label'
        .select-practices
          = f.select(:practice_ids, practice_options_within_course, { include_hidden: false }, { multiple: true, class: 'js-select2' })
      .form-item
        = f.label :title, class: 'a-form-label'
        = f.text_field :title, class: 'a-text-input js-warning-form', placeholder: 'display: inline-block ã®æŒ™å‹•ã®èª¿æŸ»ã‚’é€²ã‚ãŸ'
        .a-form-help
          | å¾Œã§æ¢ã—ã‚„ã™ããªã‚‹ã‚¿ã‚¤ãƒˆãƒ«ãŒã‚ªã‚¹ã‚¹ãƒ¡
      .form-item
        = f.label :reported_on, class: 'a-form-label'
        = f.date_field :reported_on, class: 'a-text-input'
      .form-item.is-sm
        label.a-form-label
          = f.label :emotion
        ul.form-item__radio-buttons.is-inline.is-3-items
          = f.collection_radio_buttons :emotion, Report.faces, :first, :second do |b|
            li.form-radio-button.test-select-emotions
              = b.radio_button(class: 'a-toggle-checkbox')
              label.form-radio-button__label.is-lg for="report_emotion_#{b.value}"
                = image_tag b.text, id: b.value, alt: b.value, class: 'form-label__emotion-image'
                span.form-radio-button__label-name
                  = b.value
      .form-item
        label.a-form-label
          | å­¦ç¿’æ™‚é–“

        .form-item__lerning-times#js-learning-times
          = f.fields_for :learning_times do |learning_time|
            = render 'learning_time_fields', f: learning_time
          .form-item__add-times
            = link_to_add_association f, :learning_times, class: 'a-button is-md is-primary' do
              i.fas.fa-plus
              | å­¦ç¿’æ™‚é–“è¿½åŠ 

        .checkboxes
          .checkboxes__items
            .checkboxes__item
              = f.label :no_learn, class: 'is-sm' do
                = f.check_box :no_learn, class: 'js-no-practice-time'
                = Report.human_attribute_name :no_learn

            label.a-form-help-link.is-muted-text(for='modal-progress')
              span.a-form-help-link__label è©³ã—ã
              span.a-help
                i.fas.fa-question

  .form__items
    .form-item
      - if !@report.wip? && params[:action] != 'new' && params[:action] != 'create'
        .a-page-notice.is-danger
          .a-page-notice__inner
            p
              | ã“ã®æ—¥å ±ã¯ã™ã§ã«æå‡ºæ¸ˆã¿ã§ã™ã€‚
      .row.js-markdown-parent
        .col-md-6.col-xs-12
          .form-item__header
            = f.label :description, class: 'a-form-label'
            #js-report-template(
              template-description="#{current_user.report_template&.description}"
              template-id="#{current_user.report_template&.id}"
            )
          .a-textarea-bottom-note
            = f.text_area :description,
              class: "a-text-input js-warning-form js-report-content markdown-form__text-area #{params[:action] == 'new' ? '' : 'js-markdown'}",
              data: { 'preview': '.js-preview' }
            .a-textarea-bottom-note__banner
              | é€”ä¸­ä¿å­˜ã¯ã€Œcommand + sã€ ãƒãƒ¡ã«ä¿å­˜ã—ã‚ˆã†ã€‚
        .col-md-6.col-xs-12
          .a-form-label
            | ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
          .js-preview.is-long-text.markdown-form__preview

  .form-actions.is-report
    ul.form-actions__items
      li.form-actions__item.is-main.has-help
        = f.submit 'WIP', class: 'a-button is-lg is-primary is-block', id: 'js-shortcut-wip'
        .form-actions__item-help
          | ã¾ã æ›¸ã„ã¦ã‚‹é€”ä¸­
          label.a-form-help-link.is-muted-text(for='modal-wip')
            span.a-form-help-link__label è©³ã—ã
            span.a-help
              i.fas.fa-question

      li.form-actions__item.is-main.has-help
        - if report.new_record? || report.wip?
          = f.submit 'æå‡º', class: 'a-button is-lg is-warning is-block', id: 'js-shortcut-submit'
        - else
          = f.submit 'å†…å®¹å¤‰æ›´', class: 'a-button is-lg is-warning is-block', id: 'js-shortcut-submit'
        .form-actions__item-help
          | æ—¥å ±å®Œæˆ
      li.form-actions__item.is-sub.has-help
        - case params[:action]
        - when 'new', 'create'
          = link_to 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', reports_path, class: 'a-button is-md is-secondary is-block'
        - when 'edit', 'update'
          = link_to 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', report_path, class: 'a-button is-md is-secondary is-block'

= render '/shared/modal', id: 'modal-progress', title: 'å­¦ç¿’æ™‚é–“ã¯ç„¡ã—ã¨ã¯ï¼Ÿ'
  .modal__description.is-md
    .a-short-text
      p
        | ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¯é€²ã‚ã¦ã„ãªã„ã‘ã©æ—¥å ±ã¯æ›¸ã„ã¦ãŠããŸã„ã¨ã„ã†ã¨ãã¯ã€
        | å­¦ç¿’æ™‚é–“ç„¡ã—ã®æ—¥å ±ã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚
        | ã€Œå­¦ç¿’æ™‚é–“ã¯ç„¡ã—ã€ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚
      p
        | æ—¥å ±ã‚’æ›¸ãã¨ã„ã†ã“ã¨ã‚‚æ–‡ç« ã‚’æ›¸ãã“ã¨ã€ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã«æ…£ã‚Œã‚‹ãŸã‚ã®å¤§äº‹ãªå­¦ç¿’ã§ã™ã€‚
        | ãªã®ã§ã€ä»Šã“ã®æ—¥å ±ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚é–“ã‚‚å­¦ç¿’æ™‚é–“ã«å«ã‚ã¦ã—ã¾ã£ã¦å•é¡Œãªã„ã§ã™ã‚ˆã€‚

= render '/shared/modal', id: 'modal-wip', title: 'WIPã¨ã¯ï¼Ÿ'
  .modal__description.is-md
    .a-short-text
      p
        | WIPã¨ã¯ã€ã€Œwork in progressã€ã‚‚ã—ãã¯ã€Œwork in processã€ã®ç•¥ã€‚
        | ã€Œä½œæ¥­ä¸­ã€ã‚’è¡¨ã™ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ç•Œéšˆã§ã‚ˆãä½¿ã‚ã‚Œã‚‹ç”¨èªã§ã™ã€‚
      p
        | ä¸‹æ›¸ãã¨é•ã£ã¦ã€WIPã®çŠ¶æ…‹ã§ã‚‚å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™(ãƒã‚°ã§ã¯ã‚ã‚Šã¾ã›ã‚“ğŸ˜„)ã€‚
      p
        | ãªãœã€ä½œæ¥­ä¸­ãªã®ã«å…¬é–‹ã•ã‚Œã‚Œã‚‹ã®ã‹ã¨ã„ã†ã¨ã€å…¬é–‹ã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€
        | èª°ãŒä»Šä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã®ã‹ãŒå¯è¦–åŒ–ã•ã‚Œã‚‹ã‹ã‚‰ã§ã™ã€‚
      p
        | é–‹ç™ºã®ç¾å ´ã§ã¯ã€ã¾ã ä½œæ¥­é€”ä¸­ãªã‚“ã ã‘ã©ã€ã“ã®ç†è§£ã§åˆã£ã¦ã‚‹ã‹ç¢ºèªã—ã¦æ¬²ã—ã„ã€ã¨ã€
        | ä½œæ¥­ä¸­ã®ã‚‚ã®ã‚’è¦‹ã¦ã‚‚ã‚‰ã†æ©Ÿä¼šãŒå¤šãã‚ã‚Šã¾ã™ã€‚
      p
        | ä½œæ¥­ä¸­ã®ã‚‚ã®ã‚’äººã«è¦‹ã¦ã‚‚ã‚‰ã†ã“ã¨ã§ã€
        | æ—©ã„æ®µéšã§é–“é•ã„ã«æ°—ã¥ãã€æ‰‹æˆ»ã‚ŠãŒæœ€å°é™ã«ãªã£ãŸã‚Šã€
        | ä¸Šæ‰‹ãè¡Œã£ã¦ãªã„ã“ã¨ã«æ°—ã¥ã„ã¦ã‚‚ã‚‰ã„ã€æ‰‹åŠ©ã‘ã—ã¦ã‚‚ã‚‰ã„ã‚„ã™ããªã£ãŸã‚Šã—ã¾ã™ã€‚
      p
        | ã¾ãŸã€WIP ã§ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ä»Šã¯ã¾ã é€”ä¸­ã ã‹ã‚‰è‰²ã€…é–“é•ã„ãŒå«ã¾ã‚Œã¦ãŸã‚Šã€
        | æ±šã„ã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã¾ã™ã‚ˆã€æœ€å¾Œã¯ã¡ã‚ƒã‚“ã¨ã™ã‚‹ã‹ã‚‰å£ã‚’å‡ºã•ãªã„ã§ã­ã€
        | ã¨ã„ã†åˆå›³ã«ã‚‚ãªã‚Šã¾ã™ã€‚
      p
        | æ—¥å ±ã‚‚åŒã˜ã§ã€WIP ã¯ã©ã‚“ãªã«é–“é•ã£ãŸã“ã¨ã‚’æ›¸ã„ã¦ã¦ã‚‚å•é¡Œãªã—ã§ã™ã€‚
        | é€”ä¸­çµŒéã‚’äººå‰ã«æ™’ã™ã“ã¨ã«æ…£ã‚Œã¦ã—ã¾ã„ã¾ã—ã‚‡ã†ğŸ’ª
