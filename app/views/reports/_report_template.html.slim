div(
  data-report-template-registered-template-value=template_description
  data-report-template-registered-template-id-value=template_id
  data-report-template-editing-value=editingValue
  data-report-template-is-editing-template-valid-value=is_editing_template_valid
)
  .form-item-actions
    ul.form-item-actions__items
      - if template_id.present?
        li.form-item-actions__item
          a.form-item-actions__text-link.is-danger(
            data-action="click->report-template#replaceReport"
          )
            | テンプレートを反映する

        li.form-item-actions__item
          button.a-button.is-sm.is-secondary.is-block(
            type='button'
            data-action="click->report-template#openModal"
          )
            | テンプレート変更
      - else
        li.form-item-actions__item
          button.a-button.is-sm.is-secondary.is-block(
            type='button'
            data-action="click->report-template#openModal"
          )
            | テンプレート登録

  .a-overlay.is-js.is-hidden(
    data-report-template-target='modal'
    data-action='click->report-template#clickOutside'
    role='dialog'
    aria-modal='true'
    aria-labelledby='report-template-modal-title'
    aria-hidden='true'
  )
    .a-card.is-modal
      header.card-header.is-sm
        h1.card-header__title 日報テンプレート
      hr.a-border

      .a-form-tabs.js-tabs
        .a-form-tabs__tab.js-tabs__tab(
          class=(editingValue ? 'is-active' : '')
          data-action='click->report-template#clickTemplateTab'
          data-report-template-target='templateTab'
        )
          | テンプレート
        .a-form-tabs__tab.js-tabs__tab(
          class=(editingValue ? '' : 'is-active')
          data-action='click->report-template#clickPreviewTab'
          data-report-template-target='previewTab'
        )
          | プレビュー

      .a-markdown-input.js-markdown-parent
        .a-markdown-input__inner.js-tabs__content(
          class=(editingValue ? 'is-active' : '')
          data-report-template-target='templateContent'
        )
          textarea.a-text-input.a-markdown-input__textarea.has-max-height#js-template-content(
            data-preview='#js-template-preview'
            data-report-template-target='templateInput'
            name='report_template[description]'
            data-action='input->report-template#updateSubmitButtonState'
          ) = template_description

        .a-markdown-input__inner.js-tabs__content.a-long-text.is-md.a-markdown-input__preview.has-max-height(
          id='js-template-preview'
          class=(editingValue ? '' : 'is-active')
          data-report-template-target='previewContent'
        )

      footer.card-footer
        .card-main-actions
          ul.card-main-actions__items
            - action = template_id.present? ? 'updateTemplate' : 'registerTemplate'
            - label = template_id.present? ? '変更' : '登録'

            li.card-main-actions__item
              button.a-button.is-primary.is-sm.is-block(
                type='button'
                class=(editingValue ? 'is-active' : '')
                data-action='click->report-template##{action}'
                data-report-template-target='submitButton'
                disabled=true
              ) = label
            li.card-main-actions__item.is-sub
              .card-main-actions__muted-action(
                data-action='click->report-template#closeModal'
              )
                | キャンセル
